<VirtualHost *:8080>
    ServerName apache
    ServerAdmin webmaster@localhost

    ProxyPreserveHost On

    ProxyPassMatch ^/api/socket.io/(.*) ws://backend:5000/api/socket.io/$1
    ProxyPassReverse ^/api/socket.io/(.*) ws://backend:5000/api/socket.io/$1

    <Location /api/>
        ProxyPass http://backend:5000/
        ProxyPassReverse http://backend:5000/
        Require all granted
    </Location>

    ProxyPass / http://frontend:3000/
    ProxyPassReverse / http://frontend:3000/

</VirtualHost>
